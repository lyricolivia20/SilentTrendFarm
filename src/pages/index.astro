---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('posts');
---

<Layout title="SilentTrendFarm - Latest Trends and Reviews" description="Discover trending products and insightful reviews on SilentTrendFarm">
	<div class="space-y-8">
		<h2 class="text-2xl font-bold">Latest Posts</h2>
		{posts.map((post) => (
			<article class="bg-white p-6 rounded-lg shadow">
				<h3 class="text-xl font-semibold mb-2">
					<a href={`/posts/${post.slug}/`} class="text-blue-600 hover:underline">{post.data.title}</a>
				</h3>
				<p class="text-gray-600 mb-4">{post.data.description}</p>
				<p class="text-sm text-gray-500">Published: {post.data.pubDate.toDateString()}</p>
				{post.data.affiliateLinks && (
					<div class="mt-4">
						{post.data.affiliateLinks.map((link) => (
							<a href={link.url} class="bg-blue-500 text-white px-4 py-2 rounded mr-2 inline-block" target="_blank">Buy Now</a>
						))}
					</div>
				)}
			</article>
		))}
	</div>
</Layout>
